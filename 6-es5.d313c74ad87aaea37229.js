!function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{fJsw:function(e,a,i){"use strict";i.r(a),i.d(a,"FaqModule",function(){return G});var c=i("tyNb"),s=i("fXoL"),r=(i("8LU1"),i("XNiG"));i("quSY"),i("0EQZ");var o,u=((o=function e(){n(this,e)}).\u0275mod=s.Pb({type:o}),o.\u0275inj=s.Ob({factory:function(e){return new(e||o)}}),o),p=i("+rOU"),h=i("ofXK"),f=i("FKr1"),b=(i("u47x"),i("/uUt"),i("JX91"),i("pLZG")),l=(i("IzEk"),i("FtGj"),i("R1ws"),i("EY2u"));i("VRyK"),i("R0Ic");var d,g,k=((d=function e(){n(this,e)}).\u0275mod=s.Pb({type:d}),d.\u0275inj=s.Ob({factory:function(e){return new(e||d)},imports:[[h.c,f.h,u,p.g]]}),d),m=i("NFeN"),v=i("5HBU"),x=i("2Vo4"),y=i("tk/3"),w=((g=function(){function e(t){n(this,e),this._httpClient=t,this.onFaqsChanged=new x.a({})}return t(e,[{key:"resolve",value:function(e,t){var n=this;return new Promise(function(e,t){Promise.all([n.getFaqs()]).then(function(){e()},t)})}},{key:"getFaqs",value:function(){var e=this;return new Promise(function(t,n){e._httpClient.get("api/faq").subscribe(function(n){e.faqs=n,e.onFaqsChanged.next(e.faqs),t(e.faqs)},n)})}}]),e}()).\u0275fac=function(e){return new(e||g)(s.bc(y.c))},g.\u0275prov=s.Nb({token:g,factory:g.\u0275fac}),g),_=i("3Pt+"),O=i("cp0P"),q=i("eIep"),C=i("1G5W"),j=i("vkgz"),S=i("Kj3r"),I=i("lJxs"),P=i("JIr8"),X=i("nYR2"),R=i("AytR"),K=i("k1t7"),W=i("qXBG"),F=i("dNgK"),J=i("mkVU"),N=i("XiUz"),L=i("IyRd");function z(e,t){if(1&e){var n=s.Yb();s.Xb(0,"zxing-scanner",6),s.fc("scanSuccess",function(e){return s.Cc(n),s.jc().sendCheckPoint(e)}),s.Wb()}}function U(e,t){1&e&&(s.Xb(0,"div",7),s.Xb(1,"div",8),s.Xb(2,"div",9),s.Mc(3,"Sending checkpoint..."),s.Wb(),s.Xb(4,"div",10),s.Mc(5,"Please wait."),s.Wb(),s.Wb(),s.Wb())}var A,B,Y=[{path:"",component:(A=function(){function e(t,a,i,c,s,o){n(this,e),this._faqService=t,this._fuseProgressBarService=a,this._authService=i,this._snackbar=c,this._http=s,this._core=o,this._headers=(new y.f).set("Content-Type","application/json"),this.loading=!1,this._checkpoint$=new r.a,this._baseurl="",this.searchInput=new _.e(""),this.step=0,this._unsubscribeAll=new r.a,this._baseurl=R.a.apiUrl}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.userLoggedIn=this._authService.getObjectItem("userLoggedIn");var t=this.userLoggedIn.info.reg_code;this._core.isOnline.pipe(Object(b.a)(function(e){return!0===e}),Object(q.a)(function(n){var a=JSON.parse(localStorage.getItem("postponedCheckpoints")||"[]").map(function(n){return e._http.post("".concat(e._baseurl,"/cyclists/").concat(t,"/checkpoints"),{checkpoint:n.checkpoint,timestamp:n.timestamp})});return Object(O.a)([].concat(a))}),Object(C.a)(this._unsubscribeAll)).subscribe(function(){e._snackbar.open("Checkpoint request resumed successfully","OK",{duration:4e3,panelClass:"green-snackbar"}),localStorage.setItem("postponedCheckpoints",JSON.stringify([]))}),this._checkpoint$.asObservable().pipe(Object(j.a)(function(){e._fuseProgressBarService.show(),e.loading=!0}),Object(S.a)(1e3),Object(q.a)(function(t){return e._core.isOnline.pipe(Object(j.a)(function(n){if(!n){e._snackbar.open("You are currently offline, the request will resume once you're back online","OK",{duration:4e3,panelClass:["red-snackbar","login-snackbar"]});var a=JSON.parse(localStorage.getItem("postponedCheckpoints")||"[]").filter(function(e){return e.checkpoint!==t}).concat({checkpoint:t,timestamp:new Date});localStorage.setItem("postponedCheckpoints",JSON.stringify(a)),e._fuseProgressBarService.hide(),e.loading=!1}}),Object(I.a)(function(e){return{qrCode:t,status:e}}))}),Object(b.a)(function(e){return!0===e.status}),Object(q.a)(function(n){var a=n.qrCode,i={headers:e._headers};return e._http.post("".concat(e._baseurl,"/cyclists/").concat(t,"/checkpoints"),{checkpoint:a,timestamp:new Date},i).pipe(Object(P.a)(function(t){return e._snackbar.open(t.message,"",{duration:4e3,panelClass:["red-snackbar","login-snackbar"]}),l.a}),Object(X.a)(function(){e.loading=!1,e._fuseProgressBarService.hide()}))}),Object(j.a)(function(t){!1===t.status&&e._snackbar.open("duplicate checkpoint"===t.message?"You've already checked in this checkpoint":t.message,"OK",{duration:4e3,panelClass:"red-snackbar"})}),Object(b.a)(function(e){return e.status})).subscribe(function(t){e._snackbar.open(t.message,"OK",{duration:4e3,panelClass:"green-snackbar"})})}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"setStep",value:function(e){this.step=e}},{key:"nextStep",value:function(){this.step++}},{key:"prevStep",value:function(){this.step--}},{key:"sendCheckPoint",value:function(e){this._checkpoint$.next(e)}}]),e}(),A.\u0275fac=function(e){return new(e||A)(s.Rb(w),s.Rb(K.a),s.Rb(W.a),s.Rb(F.a),s.Rb(y.c),s.Rb(J.a))},A.\u0275cmp=s.Lb({type:A,selectors:[["faq"]],decls:8,vars:2,consts:[["id","faq",1,"page-layout","simple","full-width"],["fxLayout","column","fxLayoutAlign","center center",1,"accent"],[1,"hero-text"],[1,"content","px-16","py-24","px-sm-24","py-sm-32"],["id","qrCheckpoint",3,"scanSuccess",4,"ngIf"],["class","fuse-card","style","max-width:100%",4,"ngIf"],["id","qrCheckpoint",3,"scanSuccess"],[1,"fuse-card",2,"max-width","100%"],[1,"p-64"],[1,"h2"],[1,"h4","secondary-text"]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Xb(1,"div",1),s.Xb(2,"div",2),s.Xb(3,"h1"),s.Mc(4,"Scan Checkpoint"),s.Wb(),s.Wb(),s.Wb(),s.Xb(5,"div",3),s.Kc(6,z,1,0,"zxing-scanner",4),s.Kc(7,U,6,0,"div",5),s.Wb(),s.Wb()),2&e&&(s.Fb(6),s.qc("ngIf",!t.loading),s.Fb(1),s.qc("ngIf",t.loading))},directives:[N.c,N.b,h.m,L.a],styles:["faq .header{flex:1 0 auto;height:360px;max-height:360px;background:#1a237e;background:linear-gradient(90deg,#0e2a3b 0,#34306b)}@media screen and (max-width:599px){faq .header{height:240px;padding:16px}}faq .header .hero-text h1{color:#fff;font-size:48px;font-weight:400;letter-spacing:.01em;text-align:center;margin-top:0;margin-bottom:16px}@media screen and (max-width:599px){faq .header .hero-text h1{font-size:24px}}faq .header .search{width:100%;max-width:640px;height:56px;line-height:56px;padding:18px;border-radius:28px;overflow:hidden}faq .header .search input{height:56px;padding-left:16px;border:none;outline:none}faq .content{max-width:960px;width:100%;margin:0 auto}"],encapsulation:2}),A),resolve:{faq:w}}],G=((B=function e(){n(this,e)}).\u0275mod=s.Pb({type:B}),B.\u0275inj=s.Ob({factory:function(e){return new(e||B)},providers:[w],imports:[[c.k.forChild(Y),k,m.b,v.a,L.b]]}),B)}}])}();