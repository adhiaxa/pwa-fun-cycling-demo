(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{hYeI:function(e,i,t){"use strict";t.r(i),t.d(i,"MailConfirmModule",function(){return re});var a=t("tyNb"),r=t("NFeN"),n=t("5HBU"),o=t("PVWW"),s=t("tk/3"),c=t("vkgz"),m=t("eIep"),l=t("JIr8"),d=t("nYR2"),g=t("pLZG"),b=t("XNiG"),h=t("HDdC"),u=t("EY2u"),p=t("3Pt+"),f=t("AytR"),v=t("fXoL"),w=t("0JVi"),S=t("k1t7"),A=t("dNgK"),I=t("mkVU"),C=t("XiUz"),y=t("ofXK"),k=t("IyRd"),F=t("kmnG"),x=t("qFsG"),W=t("bTqV");const M=["video"],X=["canvas"];function D(e,i){if(1&e){const e=v.Yb();v.Xb(0,"div",6),v.fc("click",function(){return v.Cc(e),v.jc().rotateVideoInput(!0)}),v.Wb()}}class E{constructor(e,i,t){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=i,this._imageAsDataUrl=e,this._imageData=t}static getDataFromDataUrl(e,i){return e.replace(`data:${i};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=E.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}let _=(()=>{class e{constructor(){this.width=640,this.height=480,this.videoOptions=e.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=e.DEFAULT_IMAGE_TYPE,this.imageQuality=e.DEFAULT_IMAGE_QUALITY,this.imageCapture=new v.o,this.initError=new v.o,this.imageClick=new v.o,this.cameraSwitched=new v.o,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(e=>{"string"==typeof e?this.switchToVideoInput(e):this.rotateVideoInput(!1!==e)})}static getMediaConstraintsForDevice(e,i){const t=i||this.DEFAULT_VIDEO_OPTIONS;return e&&(t.deviceId={exact:e}),t}static getDeviceIdFromMediaStreamTrack(i){if(i.getSettings&&i.getSettings()&&i.getSettings().deviceId)return i.getSettings().deviceId;if(i.getConstraints&&i.getConstraints()&&i.getConstraints().deviceId){const t=i.getConstraints().deviceId;return e.getValueFromConstrainDOMString(t)}}static getFacingModeFromMediaStreamTrack(i){if(i){if(i.getSettings&&i.getSettings()&&i.getSettings().facingMode)return i.getSettings().facingMode;if(i.getConstraints&&i.getConstraints()&&i.getConstraints().facingMode){const t=i.getConstraints().facingMode;return e.getValueFromConstrainDOMString(t)}}}static isUserFacing(i){const t=e.getFacingModeFromMediaStreamTrack(i);return!!t&&"user"===t.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const i=this.nativeVideoElement,t={width:this.width,height:this.height};i.videoWidth&&(t.width=i.videoWidth,t.height=i.videoHeight);const a=this.canvas.nativeElement;a.width=t.width,a.height=t.height;const r=a.getContext("2d");r.drawImage(i,0,0);const n=this.imageType?this.imageType:e.DEFAULT_IMAGE_TYPE,o=a.toDataURL(n,this.imageQuality?this.imageQuality:e.DEFAULT_IMAGE_QUALITY);let s=null;this.captureImageData&&(s=r.getImageData(0,0,a.width,a.height)),this.imageCapture.next(new E(o,n,s))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(i,t){const a=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const r=e.getMediaConstraintsForDevice(i,t);navigator.mediaDevices.getUserMedia({video:r}).then(i=>{this.mediaStream=i,a.srcObject=i,a.play(),this.activeVideoSettings=i.getVideoTracks()[0].getSettings();const t=e.getDeviceIdFromMediaStreamTrack(i.getVideoTracks()[0]);this.cameraSwitched.next(t),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=t?this.availableVideoInputs.findIndex(e=>e.deviceId===t):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(e=>{this.initError.next({message:e.message,mediaStreamError:e})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return e.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(e=>e.stop())}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,i)=>{(class{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((e,i)=>{navigator.mediaDevices.enumerateDevices().then(i=>{e(i.filter(e=>"videoinput"===e.kind))}).catch(e=>{i(e.message||e)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(i=>{this.availableVideoInputs=i,e(i)}).catch(e=>{this.availableVideoInputs=[],i(e)})})}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=v.Lb({type:e,selectors:[["webcam"]],viewQuery:function(e,i){if(1&e&&(v.Qc(M,3),v.Qc(X,3)),2&e){let e;v.xc(e=v.gc())&&(i.video=e.first),v.xc(e=v.gc())&&(i.canvas=e.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera",mirrorImage:"mirrorImage"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,i){1&e&&(v.Xb(0,"div",0),v.fc("click",function(){return i.imageClick.next()}),v.Xb(1,"video",1,2),v.fc("resize",function(){return i.videoResize()}),v.Wb(),v.Kc(3,D,1,0,"div",3),v.Sb(4,"canvas",4,5),v.Wb()),2&e&&(v.Fb(1),v.Hb(i.videoStyleClasses),v.qc("width",i.videoWidth)("height",i.videoHeight),v.Fb(2),v.qc("ngIf",i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized),v.Fb(1),v.qc("width",i.width)("height",i.height))},directives:[y.m],styles:['.webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;line-height:0;position:relative}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC");background-position:50%;background-repeat:no-repeat;background-size:80%;border-radius:5px;cursor:pointer;height:48px;position:absolute;right:13px;top:10px;transition:background-color .2s ease;width:48px}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}']}),e.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},e.DEFAULT_IMAGE_TYPE="image/jpeg",e.DEFAULT_IMAGE_QUALITY=.92,e})(),O=(()=>{class e{}return e.\u0275mod=v.Pb({type:e}),e.\u0275inj=v.Ob({factory:function(i){return new(i||e)},imports:[[y.c]]}),e})();function T(e,i){if(1&e){const e=v.Yb();v.Xb(0,"zxing-scanner",19),v.fc("scanSuccess",function(i){return v.Cc(e),v.jc(2).handleQrCodeResult(i)}),v.Wb()}}function V(e,i){1&e&&(v.Xb(0,"div",20),v.Xb(1,"div",21),v.Xb(2,"div",22),v.Mc(3,"Verifying..."),v.Wb(),v.Xb(4,"div",23),v.Mc(5,"Please wait."),v.Wb(),v.Wb(),v.Wb())}function q(e,i){if(1&e&&(v.Vb(0),v.Xb(1,"div",15),v.Mc(2,"Scan QR Code for registration"),v.Wb(),v.Xb(3,"div",16),v.Kc(4,T,1,0,"zxing-scanner",17),v.Kc(5,V,6,0,"div",18),v.Wb(),v.Ub()),2&e){const e=v.jc();v.Fb(4),v.qc("ngIf",!e.loading),v.Fb(1),v.qc("ngIf",e.loading)}}function N(e,i){if(1&e){const e=v.Yb();v.Vb(0),v.Xb(1,"div",15),v.Mc(2,"Registration Failed"),v.Wb(),v.Xb(3,"div",16),v.Xb(4,"p"),v.Mc(5,"Registration Code is not valid"),v.Wb(),v.Wb(),v.Xb(6,"div",13),v.Xb(7,"a",24),v.fc("click",function(){return v.Cc(e),v.jc().resetState()}),v.Mc(8,"Try again"),v.Wb(),v.Wb(),v.Ub()}}function R(e,i){if(1&e){const e=v.Yb();v.Vb(0),v.Xb(1,"div",15),v.Mc(2,"Registration Failed"),v.Wb(),v.Xb(3,"div",16),v.Xb(4,"p"),v.Mc(5,"QR Code is already registered"),v.Wb(),v.Wb(),v.Xb(6,"div",13),v.Xb(7,"a",24),v.fc("click",function(){return v.Cc(e),v.jc().resetState()}),v.Mc(8,"Try again"),v.Wb(),v.Wb(),v.Ub()}}function U(e,i){1&e&&(v.Xb(0,"mat-error"),v.Mc(1," Name is required "),v.Wb())}function j(e,i){1&e&&(v.Xb(0,"mat-error"),v.Mc(1," CompanyName is required "),v.Wb())}function Q(e,i){1&e&&(v.Xb(0,"mat-error"),v.Mc(1," CompanyName is required "),v.Wb())}function B(e,i){1&e&&(v.Xb(0,"mat-error"),v.Mc(1," Invalid Email. "),v.Wb())}function P(e,i){1&e&&(v.Xb(0,"mat-error"),v.Mc(1," Phone Number is required "),v.Wb())}function z(e,i){if(1&e&&(v.Xb(0,"option",37),v.Mc(1),v.Wb()),2&e){const e=i.$implicit;v.qc("ngValue",e.value),v.Fb(1),v.Nc(e.name)}}function L(e,i){1&e&&(v.Xb(0,"mat-error"),v.Mc(1," Bike Type is required "),v.Wb())}function Y(e,i){if(1&e){const e=v.Yb();v.Vb(0),v.Xb(1,"webcam",38),v.fc("imageCapture",function(i){return v.Cc(e),v.jc(2).handleImage(i)})("initError",function(i){return v.Cc(e),v.jc(2).handleInitError(i)}),v.Wb(),v.Xb(2,"button",39),v.fc("click",function(){return v.Cc(e),v.jc(2).triggerSnapshot()}),v.Mc(3,"Take Selfie"),v.Wb(),v.Ub()}if(2&e){const e=v.jc(2);v.Fb(1),v.qc("trigger",e.triggerObservable)("height",300)("width",300)}}function G(e,i){if(1&e){const e=v.Yb();v.Vb(0),v.Xb(1,"div",40),v.Sb(2,"img",41),v.Wb(),v.Xb(3,"button",39),v.fc("click",function(){return v.Cc(e),v.jc(2).webcamImage=null}),v.Mc(4,"Retry selfie"),v.Wb(),v.Ub()}if(2&e){const e=v.jc(2);v.Fb(2),v.qc("src",e.webcamImage.imageAsDataUrl,v.Ec)}}function J(e,i){1&e&&(v.Xb(0,"h4"),v.Mc(1,"Camera Errors:"),v.Wb())}function K(e,i){if(1&e&&(v.Xb(0,"ul"),v.Xb(1,"li"),v.Mc(2),v.kc(3,"json"),v.Wb(),v.Wb()),2&e){const e=i.$implicit;v.Fb(2),v.Nc(v.lc(3,1,e))}}function H(e,i){if(1&e){const e=v.Yb();v.Vb(0),v.Xb(1,"div",15),v.Mc(2,"Registration Code Verified"),v.Wb(),v.Xb(3,"div",16),v.Xb(4,"p"),v.Mc(5,"Please continue with registration form below"),v.Wb(),v.Wb(),v.Xb(6,"form",25),v.fc("ngSubmit",function(){return v.Cc(e),v.jc().onSubmit()}),v.Xb(7,"mat-form-field",26),v.Xb(8,"mat-label"),v.Mc(9,"Name"),v.Wb(),v.Sb(10,"input",27),v.Xb(11,"mat-icon",28),v.Mc(12,"account_circle"),v.Wb(),v.Kc(13,U,2,0,"mat-error",12),v.Wb(),v.Xb(14,"mat-form-field",26),v.Xb(15,"mat-label"),v.Mc(16,"Company Name"),v.Wb(),v.Sb(17,"input",29),v.Xb(18,"mat-icon",28),v.Mc(19,"business"),v.Wb(),v.Kc(20,j,2,0,"mat-error",12),v.Wb(),v.Xb(21,"mat-form-field",26),v.Xb(22,"mat-label"),v.Mc(23,"Company Email Address"),v.Wb(),v.Sb(24,"input",30),v.Xb(25,"mat-icon",28),v.Mc(26,"mail"),v.Wb(),v.Kc(27,Q,2,0,"mat-error",12),v.Kc(28,B,2,0,"mat-error",12),v.Wb(),v.Xb(29,"mat-form-field",26),v.Xb(30,"mat-label"),v.Mc(31,"Phone Number"),v.Wb(),v.Sb(32,"input",31),v.Xb(33,"mat-icon",28),v.Mc(34,"phone"),v.Wb(),v.Kc(35,P,2,0,"mat-error",12),v.Wb(),v.Xb(36,"mat-form-field",26),v.Xb(37,"mat-label"),v.Mc(38,"Bike Type"),v.Wb(),v.Xb(39,"select",32),v.Kc(40,z,2,2,"option",33),v.Wb(),v.Kc(41,L,2,0,"mat-error",12),v.Wb(),v.Xb(42,"div",34),v.Kc(43,Y,4,3,"ng-container",12),v.Kc(44,G,5,1,"ng-container",12),v.Kc(45,J,2,0,"h4",12),v.Kc(46,K,4,3,"ul",35),v.Wb(),v.Xb(47,"button",36),v.fc("click",function(){return v.Cc(e),v.jc().registerAccount()}),v.Mc(48," Create Account "),v.Wb(),v.Wb(),v.Ub()}if(2&e){const e=v.jc();v.Fb(6),v.qc("formGroup",e.validateForm),v.Fb(7),v.qc("ngIf",(null==e.name.errors?null:e.name.errors.required)&&e.name.invalid&&(e.name.dirty||e.name.touched)),v.Fb(7),v.qc("ngIf",e.companyName.invalid&&(e.companyName.dirty||e.companyName.touched)&&(null==e.companyName.errors?null:e.companyName.errors.required)),v.Fb(7),v.qc("ngIf",e.companyEmailAddress.invalid&&(e.companyEmailAddress.dirty||e.companyEmailAddress.touched)&&(null==e.companyEmailAddress.errors?null:e.companyEmailAddress.errors.required)),v.Fb(1),v.qc("ngIf",e.companyEmailAddress.invalid&&(e.companyEmailAddress.dirty||e.companyEmailAddress.touched)&&(null==e.companyEmailAddress.errors?null:e.companyEmailAddress.errors.email)),v.Fb(7),v.qc("ngIf",e.phoneNumber.invalid&&(e.phoneNumber.dirty||e.phoneNumber.touched)&&(null==e.phoneNumber.errors?null:e.phoneNumber.errors.required)),v.Fb(5),v.qc("ngForOf",e.bikeTypes),v.Fb(1),v.qc("ngIf",e.bikeType.invalid&&(e.bikeType.dirty||e.bikeType.touched)&&(null==e.bikeType.errors?null:e.bikeType.errors.required)),v.Fb(2),v.qc("ngIf",!e.webcamImage),v.Fb(1),v.qc("ngIf",e.webcamImage),v.Fb(1),v.qc("ngIf",e.webCamErrors.length>0),v.Fb(1),v.qc("ngForOf",e.webCamErrors),v.Fb(1),v.qc("disabled",!e.validateForm.valid)}}function Z(e,i){if(1&e&&(v.Vb(0),v.Xb(1,"div",15),v.Mc(2,"Registration Complete"),v.Wb(),v.Xb(3,"div",16),v.Xb(4,"p"),v.Mc(5,"Confirm your email address!"),v.Wb(),v.Xb(6,"p"),v.Mc(7," A confirmation e-mail has been sent to "),v.Xb(8,"b"),v.Mc(9),v.Wb(),v.Mc(10,". "),v.Wb(),v.Wb(),v.Ub()),2&e){const e=v.jc();v.Fb(9),v.Nc(e.companyEmailAddress.value)}}const $=function(){return{duration:"300ms",y:"100px"}},ee=function(e){return{value:"*",params:e}};let ie=(()=>{class e{constructor(e,i,t,a,r,n){this._fuseConfigService=e,this._http=i,this._fuseProgressBarService=t,this.fb=a,this._snackbar=r,this._coreService=n,this._headers=(new s.f).set("Content-Type","application/json"),this._qrCode$=new b.a,this._isOnline$=new h.a,this._isOnline=!1,this._baseurl="",this.regSuccess=!1,this.regComplete=!1,this.regFailed=!1,this.regDuplicate=!1,this.loading=!1,this.bikeTypes=[{name:"Road Bike",value:"Road Bike"},{name:"Seli",value:"Seli"},{name:"MTB",value:"MTB"},{name:"Other",value:"Other"}],this.webCamErrors=[],this.trigger=new b.a,this._fuseConfigService.config={layout:{navbar:{hidden:!0},toolbar:{hidden:!0},footer:{hidden:!0},sidepanel:{hidden:!0}}},this._baseurl=f.a.apiUrl}ngOnInit(){this.validateForm=this.fb.group({name:[null,[p.w.required]],companyName:[null,[p.w.required]],companyEmailAddress:[null,[p.w.required,p.w.email]],phoneNumber:[null,[p.w.required]],bikeType:[null,[p.w.required]]}),this._qrCode$.asObservable().pipe(Object(c.a)(()=>{this._fuseProgressBarService.show(),this.loading=!0}),Object(m.a)(e=>this._http.post(`${this._baseurl}/verifycode`,{reg_code:e},{headers:this._headers}).pipe(Object(l.a)(e=>(this._snackbar.open(e.message,"",{duration:4e3,panelClass:["red-snackbar","login-snackbar"]}),u.a)),Object(d.a)(()=>{this.loading=!1,this._fuseProgressBarService.hide()}))),Object(c.a)(e=>{!1===e.status&&(this.regFailed=!0,this.regSuccess=!1)}),Object(g.a)(e=>"verified"===e.message),Object(c.a)(e=>{e.code_used>0&&(this.regDuplicate=!0)}),Object(g.a)(e=>0===e.code_used)).subscribe(e=>{this._regCodeReturned=e.reg_code,this.regSuccess=!0,this.regFailed=!1})}_monitorOnlineStatus(){this._isOnline$=this._coreService.isOnline,this._isOnline$.subscribe(e=>{this._isOnline=e;const i=localStorage.getItem("qrCode");this._isOnline?this._snackbar.open("You are online!","Dismiss",{duration:4e3,panelClass:"green-snackbar"}):this._snackbar.open("You are offline!","Dismiss",{duration:4e3,panelClass:"red-snackbar"}),this._isOnline&&i&&this._submitQrCode(i)})}handleQrCodeResult(e){e&&this._qrCode$.next(e)}_submitQrCode(e){this._qrCode$.next(e)}resetState(){this.regFailed=!1,this.regSuccess=!1,this.regDuplicate=!1,this._regCodeReturned="",this.regComplete=!1}onSubmit(){for(const e in this.validateForm.controls)this.validateForm.controls[e]&&(this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity());this.validateForm.valid&&console.log(this.validateForm.value,"test")}triggerSnapshot(){this.trigger.next()}handleImage(e){this.webcamImage=e}handleInitError(e){e.mediaStreamError&&"NotAllowedError"===e.mediaStreamError.name&&this._snackbar.open("Camera access was not allowed by user!","Dismiss",{duration:4e3,panelClass:"red-snackbar"}),this.webCamErrors.push(e)}get triggerObservable(){return this.trigger.asObservable()}get name(){return this.validateForm.get("name")}get companyName(){return this.validateForm.get("companyName")}get companyEmailAddress(){return this.validateForm.get("companyEmailAddress")}get phoneNumber(){return this.validateForm.get("phoneNumber")}get bikeType(){return this.validateForm.get("bikeType")}_b64toBlob(e,i){i=i||"";let t=atob(e),a=[];for(let o=0;o<t.length;o+=512){const e=t.slice(o,o+512),i=new Array(e.length);for(var r=0;r<e.length;r++)i[r]=e.charCodeAt(r);var n=new Uint8Array(i);a.push(n)}return new Blob(a,{type:i})}registerAccount(){const e=new FormData;if(e.append("reg_code",this._regCodeReturned),e.append("nama_lengkap",this.name.value),e.append("jenis_sepeda",this.bikeType.value),e.append("email",this.companyEmailAddress.value),e.append("perusahaan",this.companyName.value),e.append("hp",this.phoneNumber.value),this.webcamImage){const i=this._b64toBlob(this.webcamImage.imageAsBase64,this.webcamImage._mimeType);e.append("image",i)}this._fuseProgressBarService.show(),this._http.post(`${this._baseurl}/cyclists`,e).pipe(Object(l.a)(e=>(this._snackbar.open(e.message,"Dismiss",{duration:4e3,panelClass:"red-snackbar"}),u.a)),Object(d.a)(()=>{this.loading=!1,this._fuseProgressBarService.hide()})).subscribe(e=>{e.status&&"success"===e.message&&(this.regComplete=!0)})}}return e.\u0275fac=function(i){return new(i||e)(v.Rb(w.b),v.Rb(s.c),v.Rb(S.a),v.Rb(p.d),v.Rb(A.a),v.Rb(I.a))},e.\u0275cmp=v.Lb({type:e,selectors:[["mail-confirm"]],decls:20,vars:10,consts:[["id","mail-confirm","fxLayout","column"],["id","mail-confirm-form-wrapper","fxLayout","column","fxLayoutAlign","center center"],["id","mail-confirm-form",2,"background-color","#000000","padding-top","32px"],[1,"logo"],["src","assets/images/logos/sinarmas.svg",1,"logo-icon"],["fxLayout","row wrap","fxLayoutGap","32px","fxLayoutAlign","flex-start"],["fxFlex","0 1 calc(40% - 32px)",1,"header-logo"],["src","assets/images/logos/left.svg",1,"logo-icon"],["fxFlex","0 1 calc(20% - 32px)",1,"header-logo-mid"],["src","assets/images/logos/tech.svg",1,"logo-icon"],["fxFlex","0 1 calc(40% - 32px)",1,"header-logo-right"],["src","assets/images/logos/right.svg",1,"logo-icon"],[4,"ngIf"],[1,"message"],[1,"link",3,"routerLink"],[1,"title"],[1,"subtitle"],["id","qrRegistration",3,"scanSuccess",4,"ngIf"],["class","fuse-card",4,"ngIf"],["id","qrRegistration",3,"scanSuccess"],[1,"fuse-card"],[1,"p-64"],[1,"h1"],[1,"h4","secondary-text"],[1,"link",3,"routerLink","click"],[3,"formGroup","ngSubmit"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","name"],["matSuffix","",1,"secondary-text"],["matInput","","formControlName","companyName"],["matInput","","formControlName","companyEmailAddress"],["matInput","","formControlName","phoneNumber"],["matNativeControl","","required","","formControlName","bikeType"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"subtitle",2,"margin","0","overflow","hidden","max-width","100%","margin-bottom","10px"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","accent","aria-label","Create Account",1,"submit-button",2,"margin-top","30px",3,"disabled","click"],[3,"ngValue"],[2,"margin-bottom","10px",3,"trigger","height","width","imageCapture","initError"],["mat-raised-button","","color","accent",1,"actionBtn",3,"click"],[2,"margin-bottom","10px"],["width","300",3,"src"]],template:function(e,i){1&e&&(v.Xb(0,"div",0),v.Xb(1,"div",1),v.Xb(2,"div",2),v.Xb(3,"div",3),v.Sb(4,"img",4),v.Wb(),v.Xb(5,"div",5),v.Xb(6,"div",6),v.Sb(7,"img",7),v.Wb(),v.Xb(8,"div",8),v.Sb(9,"img",9),v.Wb(),v.Xb(10,"div",10),v.Sb(11,"img",11),v.Wb(),v.Wb(),v.Kc(12,q,6,2,"ng-container",12),v.Kc(13,N,9,0,"ng-container",12),v.Kc(14,R,9,0,"ng-container",12),v.Kc(15,H,49,13,"ng-container",12),v.Kc(16,Z,11,1,"ng-container",12),v.Xb(17,"div",13),v.Xb(18,"a",14),v.Mc(19,"Go to login page"),v.Wb(),v.Wb(),v.Wb(),v.Wb(),v.Wb()),2&e&&(v.Fb(2),v.qc("@animate",v.uc(8,ee,v.tc(7,$))),v.Fb(10),v.qc("ngIf",!(i.regSuccess||i.regFailed||i.regDuplicate||i.regComplete)),v.Fb(1),v.qc("ngIf",i.regFailed),v.Fb(1),v.qc("ngIf",i.regDuplicate),v.Fb(1),v.qc("ngIf",i.regSuccess),v.Fb(1),v.qc("ngIf",i.regComplete),v.Fb(2),v.qc("routerLink","/auth/login"))},directives:[C.c,C.b,C.d,C.a,y.m,a.j,k.a,p.y,p.p,p.i,F.c,F.g,x.b,p.c,p.o,p.g,r.a,F.h,p.v,p.u,y.l,W.b,F.b,p.s,p.x,_],pipes:[y.g],styles:["mail-confirm #mail-confirm{width:100%;background:url(/assets/images/backgrounds/dark-material-bg.jpg) no-repeat;background-size:cover}mail-confirm #mail-confirm #mail-confirm-form-wrapper{flex:1 0 auto;padding:32px}@media screen and (max-width:599px){mail-confirm #mail-confirm #mail-confirm-form-wrapper{padding:0}}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form{max-width:480px;padding:48px;text-align:center;box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}@media screen and (max-width:599px){mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form{padding:24px;width:100%}}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .logo{margin:0 auto 32px}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .header-logo{width:128px}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .header-logo-right{width:128px;margin-left:auto!important}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .header-logo-mid{width:160px;position:absolute;left:calc(48% - 70px)}@media only screen and (min-width:992px){mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .header-logo-mid{width:160px;position:absolute;left:calc(48% - 38px)}}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .title{font-size:20px;margin-top:16px}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .subtitle{margin:16px auto;max-width:300px;font-size:15px}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form .message{font-weight:600;text-align:center;margin-top:40px}mail-confirm #mail-confirm #mail-confirm-form-wrapper #mail-confirm-form #qrRegistration video{height:300px}"],encapsulation:2,data:{animation:o.a}}),e})();var te=t("bSwM");const ae=[{path:"",component:ie}];let re=(()=>{class e{}return e.\u0275mod=v.Pb({type:e}),e.\u0275inj=v.Ob({factory:function(i){return new(i||e)},imports:[[a.k.forChild(ae),r.b,n.a,k.b,W.c,A.b,te.b,F.e,r.b,x.c,O]]}),e})()}}]);