(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{fJsw:function(e,t,s){"use strict";s.r(t),s.d(t,"FaqModule",function(){return N});var n=s("tyNb"),a=s("fXoL"),i=(s("8LU1"),s("XNiG"));s("quSY"),s("0EQZ");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)}}),e})();var r=s("+rOU"),o=s("ofXK"),h=s("FKr1"),p=(s("u47x"),s("/uUt"),s("JX91"),s("pLZG")),b=(s("IzEk"),s("FtGj"),s("R1ws"),s("EY2u"));s("VRyK"),s("R0Ic");let d=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},imports:[[o.c,h.h,c,r.g]]}),e})();var u=s("NFeN"),l=s("5HBU"),g=s("2Vo4"),f=s("tk/3");let m=(()=>{class e{constructor(e){this._httpClient=e,this.onFaqsChanged=new g.a({})}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getFaqs()]).then(()=>{e()},t)})}getFaqs(){return new Promise((e,t)=>{this._httpClient.get("api/faq").subscribe(t=>{this.faqs=t,this.onFaqsChanged.next(this.faqs),e(this.faqs)},t)})}}return e.\u0275fac=function(t){return new(t||e)(a.bc(f.c))},e.\u0275prov=a.Nb({token:e,factory:e.\u0275fac}),e})();var k=s("3Pt+"),x=s("cp0P"),w=s("eIep"),_=s("1G5W"),O=s("vkgz"),v=s("Kj3r"),q=s("lJxs"),y=s("JIr8"),C=s("nYR2"),S=s("AytR"),j=s("k1t7"),I=s("qXBG"),X=s("dNgK"),P=s("mkVU"),R=s("XiUz"),K=s("IyRd");function W(e,t){if(1&e){const e=a.Yb();a.Xb(0,"zxing-scanner",6),a.fc("scanSuccess",function(t){return a.Cc(e),a.jc().sendCheckPoint(t)}),a.Wb()}}function F(e,t){1&e&&(a.Xb(0,"div",7),a.Xb(1,"div",8),a.Xb(2,"div",9),a.Mc(3,"Sending checkpoint..."),a.Wb(),a.Xb(4,"div",10),a.Mc(5,"Please wait."),a.Wb(),a.Wb(),a.Wb())}const J=[{path:"",component:(()=>{class e{constructor(e,t,s,n,a,c){this._faqService=e,this._fuseProgressBarService=t,this._authService=s,this._snackbar=n,this._http=a,this._core=c,this._headers=(new f.f).set("Content-Type","application/json"),this.loading=!1,this._checkpoint$=new i.a,this._baseurl="",this.searchInput=new k.e(""),this.step=0,this._unsubscribeAll=new i.a,this._baseurl=S.a.apiUrl}ngOnInit(){this.userLoggedIn=this._authService.getObjectItem("userLoggedIn");const e=this.userLoggedIn.info.reg_code;this._core.isOnline.pipe(Object(p.a)(e=>!0===e),Object(w.a)(t=>{const s=JSON.parse(localStorage.getItem("postponedCheckpoints")||"[]").map(t=>this._http.post(`${this._baseurl}/cyclists/${e}/checkpoints`,{checkpoint:t.checkpoint,timestamp:t.timestamp}));return Object(x.a)([].concat(s))}),Object(_.a)(this._unsubscribeAll)).subscribe(()=>{this._snackbar.open("Checkpoint request resumed successfully","OK",{duration:4e3,panelClass:"green-snackbar"}),localStorage.setItem("postponedCheckpoints",JSON.stringify([]))}),this._checkpoint$.asObservable().pipe(Object(O.a)(()=>{this._fuseProgressBarService.show(),this.loading=!0}),Object(v.a)(1e3),Object(w.a)(e=>this._core.isOnline.pipe(Object(O.a)(t=>{if(!t){this._snackbar.open("You are currently offline, the request will resume once you're back online","OK",{duration:4e3,panelClass:["red-snackbar","login-snackbar"]});const t=JSON.parse(localStorage.getItem("postponedCheckpoints")||"[]").filter(t=>t.checkpoint!==e).concat({checkpoint:e,timestamp:new Date});localStorage.setItem("postponedCheckpoints",JSON.stringify(t)),this._fuseProgressBarService.hide(),this.loading=!1}}),Object(q.a)(t=>({qrCode:e,status:t})))),Object(p.a)(({status:e})=>!0===e),Object(w.a)(({qrCode:t})=>{const s={headers:this._headers};return this._http.post(`${this._baseurl}/cyclists/${e}/checkpoints`,{checkpoint:t,timestamp:new Date},s).pipe(Object(y.a)(e=>(this._snackbar.open(e.message,"",{duration:4e3,panelClass:["red-snackbar","login-snackbar"]}),b.a)),Object(C.a)(()=>{this.loading=!1,this._fuseProgressBarService.hide()}))}),Object(O.a)(e=>{!1===e.status&&this._snackbar.open("duplicate checkpoint"===e.message?"You've already checked in this checkpoint":e.message,"OK",{duration:4e3,panelClass:"red-snackbar"})}),Object(p.a)(e=>e.status)).subscribe(e=>{this._snackbar.open(e.message,"OK",{duration:4e3,panelClass:"green-snackbar"})})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}setStep(e){this.step=e}nextStep(){this.step++}prevStep(){this.step--}sendCheckPoint(e){this._checkpoint$.next(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(m),a.Rb(j.a),a.Rb(I.a),a.Rb(X.a),a.Rb(f.c),a.Rb(P.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["faq"]],decls:8,vars:2,consts:[["id","faq",1,"page-layout","simple","full-width"],["fxLayout","column","fxLayoutAlign","center center",1,"accent"],[1,"hero-text"],[1,"content","px-16","py-24","px-sm-24","py-sm-32"],["id","qrCheckpoint",3,"scanSuccess",4,"ngIf"],["class","fuse-card","style","max-width:100%",4,"ngIf"],["id","qrCheckpoint",3,"scanSuccess"],[1,"fuse-card",2,"max-width","100%"],[1,"p-64"],[1,"h2"],[1,"h4","secondary-text"]],template:function(e,t){1&e&&(a.Xb(0,"div",0),a.Xb(1,"div",1),a.Xb(2,"div",2),a.Xb(3,"h1"),a.Mc(4,"Scan Checkpoint"),a.Wb(),a.Wb(),a.Wb(),a.Xb(5,"div",3),a.Kc(6,W,1,0,"zxing-scanner",4),a.Kc(7,F,6,0,"div",5),a.Wb(),a.Wb()),2&e&&(a.Fb(6),a.qc("ngIf",!t.loading),a.Fb(1),a.qc("ngIf",t.loading))},directives:[R.c,R.b,o.m,K.a],styles:["faq .header{flex:1 0 auto;height:360px;max-height:360px;background:#1a237e;background:linear-gradient(90deg,#0e2a3b 0,#34306b)}@media screen and (max-width:599px){faq .header{height:240px;padding:16px}}faq .header .hero-text h1{color:#fff;font-size:48px;font-weight:400;letter-spacing:.01em;text-align:center;margin-top:0;margin-bottom:16px}@media screen and (max-width:599px){faq .header .hero-text h1{font-size:24px}}faq .header .search{width:100%;max-width:640px;height:56px;line-height:56px;padding:18px;border-radius:28px;overflow:hidden}faq .header .search input{height:56px;padding-left:16px;border:none;outline:none}faq .content{max-width:960px;width:100%;margin:0 auto}"],encapsulation:2}),e})(),resolve:{faq:m}}];let N=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},providers:[m],imports:[[n.k.forChild(J),d,u.b,l.a,K.b]]}),e})()}}]);